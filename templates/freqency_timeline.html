{% extends "base.html" %}
{% load static from staticfiles %}
{% block title %}频率时间线{% endblock %}
{% block head %}
    <script type="text/javascript">
        var dt_list = new Array();

        {% for dt in dt_list %}
            dt_list.push("{{ dt }}");
        {% endfor %}

        function get_dt(idx)
        {
            return dt_list[idx];
        }

        function loadScript(url) {
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = url;
            document.body.appendChild(script);
        }

    </script>
{% endblock %}
{% block content %}
    <div class="container">
    <div class="form-inline" role="form">
        <div class="form-group">
            <label for="dt_query" >请滑动下方滑动条, 改变日期:</label>
            <input type="text" class="form-control form-date input-sm" value="{{ dt_start }}" style="width: 180px;"  id="datetimepicker" data-date-format="yyyy-mm-dd hh:ii:ss">
            <div id="slider3"></div>
        </div>
        </div>
    </div>
	<div id="allmap">

    </div>
{% endblock %}
{% block endscript %}
<script type="text/javascript">

	// 百度地图API功能
	var map = new BMap.Map("allmap");
	map.centerAndZoom(new BMap.Point(116.404, 39.915), 13);     // 初始化地图,设置中心点坐标和地图级别
    map.enableScrollWheelZoom();                        //启用滚轮放大缩小
    var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT});// 左上角，添加比例尺
	var top_left_navigation = new BMap.NavigationControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT});  //左上角，添加默认缩放平移控件
    map.addControl(top_left_control);
    map.addControl(top_left_navigation);
    map.enableKeyboard();


    var $slider3 = $("#slider3");

    if ($slider3.length > 0) {
      $slider3.slider({
        min: 0,
        max: {{ slider_cnts }},
        values: 0,
        orientation: "horizontal",
        range: "min",
        slide: function(event, ui) {
          $("#datetimepicker")
            .val(get_dt(ui.value));
        }
      });
    }
    $('#datetimepicker').datetimepicker({
        language:'zh-CN',
        autoclose:1,
        minuteStep:1});
</script>

{% endblock %}